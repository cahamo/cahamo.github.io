---
layout: default
redirect_from:
  - /tongue-drum/experiment-2
title: "Electronic tongue drum: tin foil touch sensor experiment"
---
<h1>Experiment #2: Tin Foil Sensor</h1>

<p>Noticing how much more responsive the results from the CapacitiveSensor library were when the paper clip was accidentally touched in <a href="./experiment-1">experiment #1</a>, it was concluded that metal sensors may be superior to graphite. Furthermore, some of the sensors found online were metal. So the obvious next iteration in the design of the instrument&rsquo;s keys was to try a metalic sensor.</p>

<h2>Sensor</h2>

<p>For this sensor an approximately 4.7&times;7.5cm rectangle of cheap kitchen foil was used. This was attached, along it's shorter side, to a slightly larger piece of card using copper tape. The copper tape has conductive adhesive. One pin of a piece of breadboard jumper cable was soldered to the copper tape, leaving the remaining end available to be plugged into a breadboard. The remaining edges of the tin foil were attached to the card using masking tape.</p>

<p><img class="img-fluid mx-auto d-block" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-sensor_480x353.png" width="480" height="353" alt="Photo of tin foil sensor with attached wire."></p>

<h2>Circuit</h2>

<p>The circuit used in <a href="./experiment-1">experiment #1</a> was adapted slightly for this sensor. The only change was that a 1k&ohm; resistor was placed in series with the sensor. This was done to minimise the risk to the micro-processor from any static discharge from a finger through the tin foil.</p>

<p><img class="img-fluid mx-auto d-block" src="/assets/img/projects/tongue-drum/exp-2/circuit_800x313.jpg" width="800" height="313" alt="Photograph of circuit showing the Uno, breadboard and sensor with all wiring"></p>

<p>The circuit was as follows:</p>

<p><img class="img-fluid mx-auto d-block" src="/assets/img/projects/tongue-drum/exp-2/test-circuit-diagram_680x280.png" width="680" height="280" alt="Circuit schematic"></p>

<p>Once again, the Uno was supplied with 5V from the PC via it&rsquo;s USB port. The breadboard and other components were connected in a logically similar way to the following diagram:</p>

<p><img class="img-fluid mx-auto d-block" src="/assets/img/projects/tongue-drum/exp-2/test-circuit_703x812.png" width="703" height="812" alt="Circuit layout diagram, created using TinkerCAD"></p>

<p>Pin 2 of the Uno is configured as an output pin and is connected, via a 1M&ohm; resistor to input pin 3 <em>and</em> the 1k&ohm; resistor protecting the sensor.</p>

<h2>Tests</h2>

<p>Two different tests were run on this sensor.</p>

<ol>
  <li>To test various sample rates and observe two different attributes of the sensor.</li>
  <li>To determine whether averaging the sensor readings produced smoother, more consistent results.</li>
</ol>

<p>The tests are described in the following two sections.</p>

<h3>Test 1</h3>

<h4>Methodology</h4>

<p>In these tests the aim was to test various sample rates and observe two different attributes of the sensor:</p>

<ol>
    <li class="my-1">The difference in value of results when the sensor was touched as opposed to when it was not touched.</li>
    <li class="my-1">How quickly the sensor responded to taps at different rates.</li>
</ol>

<p>The code used is the same as that used in <a href="./experiment-1">experiment #1</a>: <a href="https://github.com/cahamo/electro-tongue-drum/tree/main/src/research/SingleSensorRawDataLogger"><code>SingleSensorRawDataLogger</code></a>. This code takes repeated sensor readings using the CapacitiveSensor library and reports the results over the Uno&rsquo;s serial port.</p>

<p>The test was run multiple times, each time with the code altered to use different sample rates. These were 1, 10, 25, 50, 75, 100, 125, 150, 200 and 255. The same test rhythm was tapped out each time. This was:</p>

<ol>
    <li class="my-1">A long tap, with the finger held down.</li>
    <li class="my-1">The rhythm of a single verse of &ldquo;Happy Birthday&rdquo; with the finger released quickly after each tap.</li>
    <li class="my-1">A long tap, with the finger held down.</li>
</ol>

<p>The output was displayed on the Arduino IDE's serial plotter and screenshots were taken of the results.</p>

<p>Each time an attempt was made to have the same length of long tap and the same tempo when tapping out the tune. However, in order to fit all the results onto a single screen of the serial plotter, the taps were speeded up slightly at the lower samples rates.</p>

<h4>Results</h4>

<p>There was a readable response at all sample rates, but the sensor code responded much slower at high sample rates. This can be seen in the following sequence of graphs. Note that the X-axis represents the number of readings taken, <em>not</em> time. Consequently fact that the length of the test across the x axis reduces with incresing samples shows that there were less samples taken in a roughly fixed amount of time.</p>

<p>The various screen shots are displayed in the in increasing order of the number of samples in the carousel below.</p>

<div id="carouselIndicators1" class="carousel slide mb-3" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselIndicators1" data-slide-to="0" class="active"></li>
    <li data-target="#carouselIndicators1" data-slide-to="1"></li>
    <li data-target="#carouselIndicators1" data-slide-to="2"></li>
    <li data-target="#carouselIndicators1" data-slide-to="3"></li>
    <li data-target="#carouselIndicators1" data-slide-to="4"></li>
    <li data-target="#carouselIndicators1" data-slide-to="5"></li>
    <li data-target="#carouselIndicators1" data-slide-to="6"></li>
    <li data-target="#carouselIndicators1" data-slide-to="7"></li>
    <li data-target="#carouselIndicators1" data-slide-to="8"></li>
    <li data-target="#carouselIndicators1" data-slide-to="9"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-1.png" alt="Plot of sensor readings using 1 sample">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-10.png" alt="Plot of sensor readings using 10 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-25.png" alt="Plot of sensor readings using 25 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-50.png" alt="Plot of sensor readings using 50 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-75.png" alt="Plot of sensor readings using 75 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-100.png" alt="Plot of sensor readings using 100 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-125.png" alt="Plot of sensor readings using 125 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-150.png" alt="Plot of sensor readings using 150 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-200.png" alt="Plot of sensor readings using 200 samples">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-255.png" alt="Plot of sensor readings using 255 samples">
    </div>
    <a class="carousel-control-prev" href="#carouselIndicators1" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselIndicators1" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<h3>Test 2</h3>

<h4>Methodology</h4>

<p>The purpose of this test was to determine whether averaging the sensor readings produced smoother, more consistent results.</p>

<p>To this end the code used in test 1 was adapted to average a specified number of consecutive sensor readings and match that reading against the actual readings. This code has two parameters that can be varied: the number of samples used by the Capacitive Sensor library and the number of results from the library that are to be averaged. The code can be seen in the <a href="https://github.com/cahamo/electro-tongue-drum/tree/main/src/research/SingleSensorAvgDataLogger"><code>SingleSensorAvgDataLogger</code></a> directory in the project&rsquo;s GitHub repository.</p>

<p>The code was run using several combinations of sample size and average size and the results of tapping the sensor were plotted together in the Arduino IDE&rsquo;s serial plotter. The results were analised to determine if averaging the results made a significant contribution to the accuracy of the sensor.</p>

<p>The pattern used in test 1 was repeated.</p>

<p>On reviewing the result of test 1, two of the most promising sample size were chosen - 25 and 50 - and each was plotted with average sizes of 2, 4, 6 and 8. Screen shots were taken of each of the eight resulting combinations of values.</p>

<h4>Results</h4>

<p>The results for 25 samples are shown in the following image carousel. The raw readings are shown in blue while the averaged readings are shown in red.</p>

<div id="carouselIndicators21" class="carousel slide mb-3" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselIndicators21" data-slide-to="0" class="active"></li>
    <li data-target="#carouselIndicators21" data-slide-to="1"></li>
    <li data-target="#carouselIndicators21" data-slide-to="2"></li>
    <li data-target="#carouselIndicators21" data-slide-to="3"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-25-avg-2.png" alt="Plot of averaged sensor readings using 25 samples and an average size of 2">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-25-avg-4.png" alt="Plot of averaged sensor readings using 25 samples and an average size of 4">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-25-avg-6.png" alt="Plot of averaged sensor readings using 25 samples and an average size of 6">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-25-avg-8.png" alt="Plot of averaged sensor readings using 25 samples and an average size of 8">
    </div>
    <a class="carousel-control-prev" href="#carouselIndicators21" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselIndicators21" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<p>And now the results for 50 samples are shown similarly:</p>

<div id="carouselIndicators22" class="carousel slide mb-3" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselIndicators22" data-slide-to="0" class="active"></li>
    <li data-target="#carouselIndicators22" data-slide-to="1"></li>
    <li data-target="#carouselIndicators22" data-slide-to="2"></li>
    <li data-target="#carouselIndicators22" data-slide-to="3"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-50-avg-2.png" alt="Plot of averaged sensor readings using 50 samples and an average size of 2">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-50-avg-4.png" alt="Plot of averaged sensor readings using 50 samples and an average size of 4">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-50-avg-6.png" alt="Plot of averaged sensor readings using 50 samples and an average size of 6">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="/assets/img/projects/tongue-drum/exp-2/tin-foil-samples-50-avg-8.png" alt="Plot of averaged sensor readings using 50 samples and an average size of 8">
    </div>
    <a class="carousel-control-prev" href="#carouselIndicators22" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselIndicators22" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<h2>Conclusions</h2>

<p>Three things stand out:</p>

<ol>
  <li class="my-1">For average lengths &gt; 2, the averaged results are significantly smaller than the raw results for quick taps, but on longer taps the average value approaches the raw value. Thus the average for quick taps reduces the differential between results for touched and untouched states.</li>
  <li class="my-1">The averaged values lag behind the raw values meaning that the change from touched to untouched state and back again is detected later. Again this is more pronounced for higher average lengths.</li>
  <li class="my-1">Raw values do not appear to vary significantly from one another. They certainly do not blur the differences between the touched and untouched results.</li>
</ol>

<p class="lead">In general it would appear that averaging readings has <em>no advantage</em> over using the raw readings. In fact. for higher average lengths, averaging could potentially mask the change from untouched to touched and vice versa. Consequently it is <em>not</em> proposed to incorporate such averaging in the final instrument design.</p>

<p class="text-center"><b><a href="./">Back to main project page</a></b></p>
